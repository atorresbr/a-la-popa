#!/bin/bash
# Sopa Spades launcher script
# This script launches the OpenSpades game with special Sopa Spades configurations

# Export the resources path to use the Sopa Spades resources
export OPENSPADES_RESOURCES=~/.local/share/sopaspades/Resources
# Also check the original OpenSpades resources as fallback
if [ ! -d "$OPENSPADES_RESOURCES" ]; then
  if [ -d ~/.local/share/openspades/Resources ]; then
    echo "Using OpenSpades resources as fallback"
    export OPENSPADES_RESOURCES=~/.local/share/openspades/Resources
  fi
fi

# Define possible locations for the OpenSpades executable
POSSIBLE_LOCATIONS=(
  "/home/linux/a-la-popa/sopaspades.mk/bin/openspades" # Build directory (found)
  "openspades"                               # In PATH
  "/usr/games/openspades"                    # Common location
  "/usr/local/games/openspades"              # Alternative location
)

# Try to find the OpenSpades executable
OPENSPADES_EXEC=""
for location in "${POSSIBLE_LOCATIONS[@]}"; do
  if command -v "$location" &>/dev/null || [ -x "$location" ]; then
    OPENSPADES_EXEC="$location"
    break
  fi
done

# If OpenSpades executable is found, launch it
if [ -n "$OPENSPADES_EXEC" ]; then
  echo "Launching OpenSpades from: $OPENSPADES_EXEC"
  exec "$OPENSPADES_EXEC" "$@"
else
  echo "Error: OpenSpades executable not found."
  echo "Please make sure OpenSpades is installed correctly."
  exit 1
fi
