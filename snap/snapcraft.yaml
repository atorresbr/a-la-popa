name: sopaspades
base: core22
version: 'master'
summary: Sandbox building and FPS videogame
description: |
  SopaSpades is a compatible client of Ace of Spades 0.75.
  Can connect to a vanilla/pyspades/pysnip server.
  Uses OpenGL/AL for better experience.
  Open source, and cross platform.

grade: stable
confinement: strict

apps:
  sopaspades:
    command: sopaspades
    plugs:
      - network
      - network-bind
      - opengl
      - x11
      - pulseaudio

parts:
  scripts:
    plugin: dump
    source: snap/scripts
    organize:
  'sopaspades': bin/
  openspades:
    plugin: cmake
    configflags: [-DCMAKE_BUILD_TYPE=RelWithDebInfo]
    source: .
    build-packages:
      - clang
      - imagemagick
      - wget
      - zip
      - unzip
      - pkg-config
      - libglew-dev
      - libcurl4-openssl-dev
      - libsdl2-dev
      - libsdl2-image-dev
      - libalut-dev
      - xdg-utils
      - libfreetype6-dev
      - libopus-dev
      - libopusfile-dev
      - libjpeg-dev
      - libxinerama-dev
      - libxft-dev
    stage-packages:
      - libgl1-mesa-dri
      - libgl1-mesa-glx
      - libglew1.13
      - libopenal1
  gui:
    plugin: dump
    source: snap/gui
    organize:
      sopaspades.png: snap/gui/sopaspades.png
